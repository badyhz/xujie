<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
<title>新零售商城 · Mobile Demo</title>
<style>
  /* ========= 基础变量（移动优先） ========= */
  :root{
    --bg:#f7f8fa; --ink:#1f2937; --muted:#6b7280; --line:#e5e7eb;
    --brand:#5865f2; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
    --card:#fff; --radius:14px; --shadow:0 8px 24px rgba(0,0,0,.06);
    --tabH:56px; --safeTop:env(safe-area-inset-top); --safeBottom:env(safe-area-inset-bottom);
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,Inter,"Noto Sans SC",Helvetica,Arial;}
  a{text-decoration:none;color:inherit}
  button{border:0;background:none}
  .page{padding:12px 12px calc(var(--tabH) + 12px + var(--safeBottom));max-width:720px;margin:0 auto}
  .topbar{position:sticky;top:0;z-index:9;background:rgba(247,248,250,.9);backdrop-filter:blur(8px);padding:10px 12px calc(8px + var(--safeTop));border-bottom:1px solid var(--line)}
  .brand{font-weight:800;letter-spacing:.3px}
  .search{display:flex;gap:10px;margin-top:8px}
  .input{flex:1;background:#fff;border:1px solid var(--line);border-radius:999px;padding:12px 14px;font-size:15px}
  .btn{border-radius:12px;background:var(--brand);color:#fff;padding:12px 14px;font-weight:600}
  .btn.ghost{background:#fff;border:1px solid var(--brand);color:var(--brand)}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media (min-width:560px){ .grid{grid-template-columns:repeat(3,1fr)} }
  @media (min-width:920px){ .grid{grid-template-columns:repeat(4,1fr)} }
  .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:12px}
  .prod{display:flex;flex-direction:column;gap:8px}
  .thumb{height:140px;border-radius:10px;background:linear-gradient(135deg,#eef2ff,#e5fff3);display:flex;align-items:center;justify-content:center;font-size:48px}
  .price{font-weight:800}
  .muted{color:var(--muted);font-size:13px}
  .row{display:flex;align-items:center;gap:8px}
  .space{flex:1}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#fff;font-size:13px}
  .chip.on{background:#111;color:#fff;border-color:#111}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(20px + var(--safeBottom));background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;transition:.25s;z-index:99}
  .toast.show{opacity:1}
  /* ====== 底部 TabBar（小程序范式） ====== */
  .tabbar{position:fixed;left:0;right:0;bottom:0;height:calc(var(--tabH) + var(--safeBottom));background:#fff;border-top:1px solid var(--line);display:flex;align-items:flex-start;justify-content:space-around;padding-top:8px;padding-bottom:calc(6px + var(--safeBottom));z-index:10}
  .tab{display:flex;flex-direction:column;align-items:center;gap:4px;width:20%;font-size:12px;color:#64748b}
  .tab.active{color:#111}
  .badge{font-size:11px;background:#eef2ff;color:#3730a3;border-radius:999px;padding:2px 6px}
  .drawer{position:fixed;right:10px;top:70px;width:92vw;max-width:380px;max-height:70vh;overflow:auto;background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 20px 40px rgba(0,0,0,.18);padding:12px;display:none;z-index:50}
  .drawer.show{display:block}
</style>
</head>
<body>
  <!-- 顶部（所有页复用） -->
  <div class="topbar">
    <div class="row">
      <div class="brand">🛍️ 新零售商城</div>
      <div class="space"></div>
      <button class="chip" id="btnCart">购物车 <span id="cartCount" class="badge">0</span></button>
      <button class="chip" id="btnLogs">日志</button>
    </div>
    <div class="search">
      <input id="globalSearch" class="input" placeholder="搜商品 / 案例 / 券码…" />
      <button class="btn ghost" id="btnScan">扫码直达</button>
    </div>
  </div>

  <!-- 页面容器 -->
  <main id="app" class="page"></main>

  <!-- 底部 TabBar -->
  <nav class="tabbar" id="tabbar">
    <div class="tab" data-id="home"><div>🏠</div><div>首页</div></div>
    <div class="tab" data-id="shop"><div>🛒</div><div>商城</div></div>
    <div class="tab" data-id="cases"><div>📖</div><div>案例</div></div>
    <div class="tab" data-id="coupon"><div>🎫</div><div>优惠券</div></div>
    <div class="tab" data-id="me"><div>👤</div><div>我的</div></div>
  </nav>

  <!-- 抽屉：购物车/日志/详情 -->
  <div id="drawer" class="drawer"></div>
  <div id="toast" class="toast"></div>

<script>
/* ========== 状态（可一键迁移到小程序的 globalData） ========== */
const STATE_KEY='mall_mobile_state_v1';
const S = JSON.parse(localStorage.getItem(STATE_KEY)||'null') || {
  mode:'culture', // 首页布局模式
  cart: { items:[], couponId:null },
  coupons: [
    {id:'C200-20', title:'满200减20', type:'cash', threshold:200, value:20, acquired:false, used:false},
    {id:'C400-50', title:'满400减50', type:'cash', threshold:400, value:50, acquired:false, used:false},
    {id:'OFF-COFFEE', title:'线下咖啡券', type:'offline', threshold:0, value:1, code:'COFFEE-2025', acquired:false, used:false}
  ],
  products: [
    {id:"A101", name:"手工木托盘", price:129, rating:4.7, cat:"家居", icon:"🪵", tags:["手作","天然"]},
    {id:"A102", name:"北欧香薰蜡烛", price:89,  rating:4.5, cat:"家居", icon:"🕯️", tags:["香氛","治愈"]},
    {id:"B201", name:"原创版画·海风", price:399, rating:4.9, cat:"艺术", icon:"🖼️", tags:["原创","限量"]},
    {id:"B202", name:"手作陶杯",     price:159, rating:4.6, cat:"艺术", icon:"🏺", tags:["匠心"]},
    {id:"C301", name:"挂耳咖啡 12包", price:98,  rating:4.4, cat:"咖啡", icon:"☕", tags:["拼配"]},
    {id:"C302", name:"冷萃瓶 600ml",  price:69,  rating:4.2, cat:"咖啡", icon:"🧊", tags:["夏日"]},
    {id:"D401", name:"蓝牙音箱 mini", price:299, rating:4.5, cat:"数码", icon:"📻", tags:["便携"]},
    {id:"D402", name:"阅读台灯",       price:189, rating:4.3, cat:"数码", icon:"💡", tags:["护眼"]}
  ],
  cases: [
    {id:"S1", title:"一只托盘的旅行", cover:"🪵", brief:"从废木到餐桌的二次生命", link:"A101"},
    {id:"S2", title:"画里的风", cover:"🖼️", brief:"原创版画背后的创作手记", link:"B201"}
  ],
  orders:[],
  user:{name:"游客", points:0, address:"", level:"普通"},
  logs:[]
};
const save = ()=>localStorage.setItem(STATE_KEY, JSON.stringify(S));
const $ = (s,root=document)=>root.querySelector(s);
const $$ = (s,root=document)=>Array.from(root.querySelectorAll(s));
const money = n=>'¥'+n.toFixed(2);
const tip = (t)=>{ const x=$("#toast"); x.textContent=t; x.classList.add('show'); setTimeout(()=>x.classList.remove('show'),1400); };
const log = (e,p={})=>{ S.logs.unshift({t:new Date().toLocaleString(),e,p}); save(); };

/* ========== 路由（小程序 TabBar 思维） ========== */
const PAGES = {
  home(root){
    const cats=[...new Set(S.products.map(p=>p.cat))];
    root.innerHTML = `
      <section class="card" style="padding:0">
        <div style="padding:12px">
          <div class="row"><b>首页布局</b>
            <div class="space"></div>
            <div class="chips">
              <span class="chip ${S.mode==='culture'?'on':''}" data-mode="culture">文化优先</span>
              <span class="chip ${S.mode==='direct'?'on':''}" data-mode="direct">导流优先</span>
            </div>
          </div>
        </div>
        <div class="row" style="gap:10px;padding:12px;border-top:1px solid var(--line)">
          <button class="btn" data-go="shop">去逛商城</button>
          <button class="btn ghost" data-go="coupon">领券中心</button>
          <button class="btn ghost" data-go="scan">扫码直达</button>
        </div>
      </section>

      ${S.mode==='culture' ? cultureBlock() + hotBlock() + leadBlock() : hotBlock() + leadBlock() + cultureBlock() }
    `;

    // 事件
    $$('.chip',root).forEach(c=>c.onclick=()=>{ S.mode=c.dataset.mode; save(); tip(S.mode==='culture'?'已切换为文化优先':'已切换为导流优先'); render('home'); });
    $$('[data-go]',root).forEach(b=>b.onclick=()=>render(b.dataset.go));

    function hotBlock(){
      return `<section class="card"><b>热门商品</b>
        <div class="grid" style="margin-top:8px">${S.products.slice(0,4).map(prodCard).join('')}</div></section>`;
    }
    function cultureBlock(){
      return `<section class="card"><b>精选案例</b>
        <div class="grid" style="margin-top:8px">${S.cases.map(s=>`
          <div class="card prod">
            <div class="thumb">${s.cover}</div>
            <b>${s.title}</b><div class="muted">${s.brief}</div>
            <div class="row"><div class="space"></div>
              <button class="btn ghost" onclick="openCase('${s.id}')">阅读</button>
            </div>
          </div>`).join('')}</div></section>`;
    }
    function leadBlock(){
      return `<section class="card"><b>优惠与导流</b>
        <div class="row" style="gap:10px;margin-top:8px">
          <button class="chip" data-go="coupon">🎫 优惠券中心</button>
          <button class="chip" data-go="scan">🔍 扫码直达</button>
          <span class="muted">直播/预约入口占位（后期接入）</span>
        </div></section>`;
    }
  },

  shop(root){
    const cats=['全部', ...new Set(S.products.map(p=>p.cat))];
    root.innerHTML = `
      <section class="card">
        <div class="row" style="gap:8px">
          <select id="cat" class="chip">${cats.map(c=>`<option>${c}</option>`).join('')}</select>
          <select id="sort" class="chip">
            <option>综合</option><option>价格⬆</option><option>价格⬇</option><option>评分⬆</option>
          </select>
          <div class="space"></div>
          <button class="chip" onclick="openCart()">🛒 购物车</button>
        </div>
      </section>
      <div id="list" class="grid" style="margin-top:10px"></div>
    `;
    const list = $("#list",root); let cat='全部', sort='综合', keyword='';
    const apply=()=> {
      let arr=[...S.products];
      if(cat!=='全部') arr=arr.filter(p=>p.cat===cat);
      if(keyword) arr=arr.filter(p=>p.name.includes(keyword) || (p.tags||[]).some(t=>t.includes(keyword)));
      if(sort==='价格⬆') arr.sort((a,b)=>a.price-b.price);
      if(sort==='价格⬇') arr.sort((a,b)=>b.price-a.price);
      if(sort==='评分⬆') arr.sort((a,b)=>b.rating-a.rating);
      list.innerHTML = arr.map(prodCard).join('');
    };
    $("#cat",root).onchange=e=>{cat=e.target.value;apply()};
    $("#sort",root).onchange=e=>{sort=e.target.value;apply()};
    $("#globalSearch").oninput=e=>{keyword=e.target.value.trim();apply()};
    apply();
  },

  cases(root){
    root.innerHTML = `<section class="grid">${S.cases.map(s=>`
      <div class="card prod">
        <div class="thumb">${s.cover}</div>
        <b>${s.title}</b><div class="muted">${s.brief}</div>
        <div class="row"><div class="space"></div>
          <button class="btn ghost" onclick="openCase('${s.id}')">阅读</button>
        </div>
      </div>`).join('')}</section>`;
  },

  coupon(root){
    root.innerHTML = `
      <section class="grid">
        ${S.coupons.map(c=>`
          <div class="card prod">
            <div class="thumb" style="font-size:40px;background:linear-gradient(135deg,#fff7ed,#fee2e2)">${c.type==='offline'?'🏷️':'💸'}</div>
            <b>${c.title}</b>
            <div class="muted">${c.type==='offline'?'到店扫码核销':'下单可用（满足门槛）'}</div>
            ${c.type==='offline'?`<div class="muted">核销码：<b>${c.code}</b></div>`:''}
            <div class="row"><div class="space"></div>
              ${c.acquired?'<span class="badge">已领取</span>':`<button class="btn" onclick="claimCoupon('${c.id}')">领取</button>`}
            </div>
          </div>`).join('')}
      </section>

      <section class="card" style="margin-top:10px">
        <b>核销台（店员）</b>
        <div class="row" style="gap:8px;margin-top:8px">
          <input id="verifyCode" class="input" placeholder="输入线下券码 如：COFFEE-2025" />
          <button class="btn" id="doVerify">核销</button>
        </div>
        <div id="verifyResult" class="muted" style="margin-top:8px"></div>
      </section>
    `;
    $("#doVerify",root).onclick=()=>{
      const code = $("#verifyCode",root).value.trim();
      const c = S.coupons.find(x=>x.type==='offline' && x.code===code);
      if(!c) return $("#verifyResult",root).textContent="未找到券码"; 
      if(!c.acquired) return $("#verifyResult",root).textContent="用户未领取，无法核销";
      if(c.used) return $("#verifyResult",root).textContent="该券已使用";
      c.used=true; save(); $("#verifyResult",root).textContent="✅ 已核销："+c.title; tip("核销成功");
    };
  },

  me(root){
    const u=S.user;
    const percent=Math.min(100,(u.points%3000)/30);
    root.innerHTML=`
      <section class="card">
        <div class="row"><b>会员等级</b><div class="space"></div><span class="badge">${getLevel().level}</span></div>
        <div class="muted" style="margin-top:6px">积分：${u.points}</div>
        <div style="height:8px;border-radius:999px;background:#eef2ff;margin-top:8px"><i style="display:block;height:100%;width:${percent}%;background:var(--brand)"></i></div>
        <div class="row" style="gap:8px;margin-top:10px">
          <input id="addr" class="input" placeholder="省市区 + 详细地址" value="${u.address||''}"/>
          <button class="btn ghost" onclick="saveAddr()">保存</button>
        </div>
      </section>
      <section class="card" style="margin-top:10px">
        <b>我的订单</b>
        ${S.orders.length? S.orders.map(orderCard).join('') : '<div class="muted" style="margin-top:6px">暂无订单</div>'}
      </section>
    `;
  },

  scan(root){
    root.innerHTML = `
      <section class="card">
        <b>扫码直达</b>
        <div class="row" style="gap:8px;margin-top:8px">
          <input id="scanStr" class="input" placeholder="输入二维码字符串：PROD-A101" />
          <button class="btn" id="goScan">打开</button>
        </div>
        <div id="scanResult" style="margin-top:10px"></div>
      </section>`;
    $("#goScan",root).onclick=()=>{
      const v=$("#scanStr",root).value.trim(); const id=(v.split('PROD-')[1]||'').toUpperCase();
      const p=S.products.find(x=>x.id===id);
      $("#scanResult",root).innerHTML = p ? `<div class="card">${prodCard(p)}</div>` : `<div class="muted">未找到商品</div>`;
    };
  }
};

function render(page){ 
  current=page||current||'home';
  // Tab 选中
  $$('#tabbar .tab').forEach(t=>t.classList.toggle('active', t.dataset.id===current));
  // 页渲染
  const root=$("#app"); root.innerHTML=''; PAGES[current](root);
  updateCartCount();
  log('page_view',{page:current});
}

/* ======= 公共卡片生成 ======= */
function prodCard(p){
  return `<div class="card prod">
    <div class="thumb">${p.icon}</div>
    <b>${p.name}</b>
    <div class="muted">类别：${p.cat} · 评分 ${p.rating}</div>
    <div class="row">
      <div class="price">${money(p.price)}</div>
      <div class="space"></div>
      <button class="chip" onclick="openDetail('${p.id}')">详情</button>
      <button class="btn" onclick="addToCart('${p.id}')">加入</button>
    </div>
  </div>`;
}
function orderCard(o){
  return `<div class="card" style="margin-top:8px">
    <div class="row"><b>订单 ${o.id}</b><div class="space"></div><span class="badge">${o.status}</span></div>
    <div class="muted">金额：${money(o.pay)} · 支付：${o.channel}</div>
    <div class="muted">商品：${o.items.map(i=>i.id+'×'+i.qty).join('，')}</div>
    <div class="row" style="margin-top:8px"><div class="space"></div><button class="chip" onclick="showLogistics('${o.id}')">查看物流</button></div>
  </div>`;
}

/* ======= 购物车与下单 ======= */
function updateCartCount(){ $("#cartCount").textContent = S.cart.items.reduce((s,i)=>s+i.qty,0); }
function openCart(){
  const d=$("#drawer"); d.classList.add('show');
  const items=S.cart.items.map(ci=>{
    const p=S.products.find(x=>x.id===ci.id);
    return `<div class="row"><span>${p.name}</span><div class="space"></div>
      <button class="chip" onclick="dec('${ci.id}')">－</button>
      <b>${ci.qty}</b>
      <button class="chip" onclick="inc('${ci.id}')">＋</button>
      <b>${money(p.price*ci.qty)}</b></div>`;
  }).join('') || '<div class="muted">购物车空空如也</div>';

  const coupons=S.coupons.filter(c=>c.acquired && !c.used && c.type!=='offline');
  const total=S.cart.items.reduce((s,ci)=>s+S.products.find(p=>p.id===ci.id).price*ci.qty,0);
  const cpn=coupons.find(c=>c.id===S.cart.couponId);
  const discount = cpn && total>=cpn.threshold ? (cpn.type==='cash'?cpn.value:0) : 0;
  const pay=Math.max(0,total-discount);

  d.innerHTML = `
    <div class="row"><b>购物车</b><div class="space"></div><button class="chip" onclick="closeDrawer()">关闭</button></div>
    <div style="margin-top:8px">${items}</div>
    <hr style="border:none;border-top:1px solid var(--line);margin:10px 0">
    <div class="row">
      <span>优惠券：</span>
      <select id="applyCpn" class="chip"><option value="">不使用</option>${coupons.map(c=>`<option value="${c.id}" ${S.cart.couponId===c.id?'selected':''}>${c.title}</option>`).join('')}</select>
      <div class="space"></div>
      <div>小计 <b>${money(total)}</b> 抵扣 <b>${money(discount)}</b> 应付 <b>${money(pay)}</b></div>
    </div>
    <div class="row" style="margin-top:10px">
      <select id="channel" class="chip"><option>微信支付</option><option>支付宝</option><option>银行卡</option></select>
      <div class="space"></div><button class="btn" onclick="checkout()">下单支付</button>
    </div>`;
  $("#applyCpn").onchange=e=>{ S.cart.couponId=e.target.value||null; save(); openCart(); };
}
function closeDrawer(){ $("#drawer").classList.remove('show'); }
function addToCart(id){ const it=S.cart.items.find(x=>x.id===id); it?it.qty++:S.cart.items.push({id,qty:1}); save(); updateCartCount(); tip('已加入购物车'); log('add_cart',{id}); }
function inc(id){ const it=S.cart.items.find(x=>x.id===id); it.qty++; save(); openCart(); }
function dec(id){ const it=S.cart.items.find(x=>x.id===id); if(--it.qty<=0) S.cart.items=S.cart.items.filter(x=>x.id!==id); save(); openCart(); }
function checkout(){
  if(!S.cart.items.length) return tip('购物车为空');
  const channel=$("#channel").value;
  const coupons=S.coupons.filter(c=>c.acquired && !c.used && c.type!=='offline');
  const total=S.cart.items.reduce((s,ci)=>s+S.products.find(p=>p.id===ci.id).price*ci.qty,0);
  const cpn=coupons.find(c=>c.id===S.cart.couponId);
  const discount=cpn && total>=cpn.threshold ? cpn.value : 0;
  const pay=Math.max(0,total-discount);

  const oid="OD"+Date.now().toString().slice(-6);
  const logistics=[
    {time:new Date().toLocaleString(), desc:"订单创建"},
    {time:new Date(Date.now()+3600e3).toLocaleString(), desc:"仓库拣货中"},
    {time:new Date(Date.now()+7200e3).toLocaleString(), desc:"已发出，运输中"},
  ];
  S.orders.unshift({id:oid, items:structuredClone(S.cart.items), pay, status:"运输中", channel, logistics});
  if(cpn) cpn.used=true;
  S.user.points += Math.round(pay*10*levelFactor());
  S.cart={items:[], couponId:null};
  save(); tip('支付成功'); log('pay_ok',{oid,pay,channel}); closeDrawer(); render('me');
}

/* ======= 详情/案例/物流 ======= */
function openDetail(id){
  const p=S.products.find(x=>x.id===id);
  const code=`PROD-${p.id}`;
  const d=$("#drawer"); d.classList.add('show');
  d.innerHTML = `<div class="row"><b>${p.name}</b><div class="space"></div><button class="chip" onclick="closeDrawer()">关闭</button></div>
  <div class="thumb" style="margin-top:8px">${p.icon}</div>
  <div class="muted" style="margin-top:6px">二维码字符串：<b>${code}</b></div>
  <div class="row" style="margin-top:8px">
    <div class="price">${money(p.price)}</div><div class="space"></div>
    <button class="btn" onclick="addToCart('${p.id}')">加入购物车</button>
  </div>`;
}
function openCase(id){
  const s=S.cases.find(x=>x.id===id), p=S.products.find(x=>x.id===s.link);
  const d=$("#drawer"); d.classList.add('show');
  d.innerHTML = `<div class="row"><b>📝 ${s.title}</b><div class="space"></div><button class="chip" onclick="closeDrawer()">关闭</button></div>
    <p class="muted" style="margin-top:6px">${s.brief}……</p>
    <div class="card" style="margin-top:10px">${prodCard(p)}</div>`;
}
function showLogistics(oid){
  const o=S.orders.find(x=>x.id===oid);
  const d=$("#drawer"); d.classList.add('show');
  d.innerHTML = `<div class="row"><b>物流跟踪</b><div class="space"></div><button class="chip" onclick="closeDrawer()">关闭</button></div>
    <div style="border-left:2px solid var(--line);padding-left:10px;margin-top:8px">
      ${o.logistics.map(x=>`<div style="margin:8px 0"><b>${x.time}</b> - ${x.desc}</div>`).join('')}
    </div>`;
}

/* ======= 会员与地址 ======= */
function saveAddr(){ S.user.address=$("#addr").value.trim(); save(); tip('已保存地址'); }
function levelFactor(){ const pts=S.user.points; if(pts>=7000) return 1.2; if(pts>=3000) return 1.1; if(pts>=1000) return 1.05; return 1; }
function getLevel(){ const pts=S.user.points; if(pts>=7000) return {level:'VIP'}; if(pts>=3000) return {level:'金卡'}; if(pts>=1000) return {level:'银卡'}; return {level:'普通'}; }

/* ======= 领券/核销 ======= */
function claimCoupon(id){ const c=S.coupons.find(x=>x.id===id); c.acquired=true; save(); tip('已领取：'+c.title); render('coupon'); }
function verifyCoupon(code){ /* 已在 coupon 页面实现 */ }

/* ======= 顶部搜索/扫码入口 ======= */
$("#globalSearch").addEventListener('keydown',e=>{
  if(e.key==='Enter'){ render('shop'); }
});
$("#btnScan").onclick=()=>render('scan');

/* ======= 顶部按钮 & Tab 绑定 ======= */
$("#btnCart").onclick=openCart;
$("#btnLogs").onclick=()=>{
  const d=$("#drawer"); d.classList.add('show');
  const txt = S.logs.slice(0,120).map(l=>`${l.t} [${l.e}] ${JSON.stringify(l.p)}`).join('\n');
  d.innerHTML = `<div class="row"><b>埋点日志</b><div class="space"></div><button class="chip" onclick="closeDrawer()">关闭</button></div>
  <pre style="white-space:pre-wrap;font-family:ui-monospace,Menlo,Consolas,monospace;background:#0b1020;color:#c9e5ff;border-radius:12px;padding:10px;margin-top:8px">${txt||'暂无'}</pre>`;
};
$("#tabbar").addEventListener('click',e=>{
  const t=e.target.closest('.tab'); if(!t) return;
  const id=t.dataset.id; if(!id) return; render(id);
});

/* ======= 启动 ======= */
let current='home'; render('home');
</script>
</body>
</html>
