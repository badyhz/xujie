<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Step 2 - æ ‡ç­¾é€‰æ‹©</title>
  <style>
    :root {
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #222;
      --muted: #6c757d;
      --primary: #4dabf7;
      --chip: #eef6ff;
      --chip-on: #d0ebff;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      font-family: "Noto Sans SC", system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      position: sticky;
      top: 0;
      background: #fff;
      border-bottom: 1px solid #eee;
      z-index: 10;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 18px;
    }

    h1 {
      margin: 4px 0 6px;
      font-size: 22px;
    }

    .sub {
      color: var(--muted);
      font-size: 13px;
    }

    .toolbar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    input[type="search"] {
      flex: 1;
      min-width: 240px;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      outline: none;
    }

    main {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 16px;
      margin-top: 14px;
    }

    .panel {
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
      padding: 16px;
    }

    h2 {
      font-size: 18px;
      margin: 0 0 10px;
    }

    details {
      background: #fbfdff;
      border: 1px solid #edf2ff;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
    }

    summary {
      cursor: pointer;
      font-weight: 600;
    }

    .tag-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid #dbeafe;
      cursor: pointer;
      font-size: 13px;
    }

    .chip:hover {
      border-color: #74c0fc;
    }

    .chip.active {
      background: var(--chip-on);
      border-color: #74c0fc;
      color: #000;
    }

    .chip small {
      color: #5c677d;
    }

    .selected {
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: 540px;
      overflow: auto;
      padding-right: 6px;
    }

    .sel-item {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      background: #f8fbff;
      border: 1px solid #e7f5ff;
      border-radius: 12px;
      padding: 10px;
    }

    .sel-item .meta {
      flex: 1;
    }

    .sel-item .ttl {
      font-weight: 600;
    }

    .sel-item .desc {
      color: var(--muted);
      font-size: 12px;
      margin-top: 2px;
    }

    .pill {
      background: #edf2ff;
      color: #3b5bdb;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
    }

    .rm {
      background: #ffe3e3;
      color: #c92a2a;
      border: none;
      border-radius: 8px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 12px;
    }

    .rm:hover {
      background: #fcc;
    }

    .row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    input[type="range"] {
      width: 100%;
    }

    .muted {
      color: var(--muted);
      font-size: 12px;
    }

    footer {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 14px;
    }

    .counter {
      color: #6c757d;
      font-size: 12px;
      margin-left: 6px;
    }

    button {
      padding: 10px 14px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
    }

    button.ghost {
      background: #e9ecef;
      color: #222;
    }

    button.ok {
      background: #4dabf7;
      color: #fff;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Step 2 Â· æ ‡ç­¾é€‰æ‹©</h1>
      <div class="sub">ä»ç¯å¢ƒä¸è¡Œä¸ºè§’åº¦åˆ»ç”»ä½ çš„ç”»åƒã€‚å·¦ä¾§é€‰æ‹©æ ‡ç­¾ï¼Œå³ä¾§æŸ¥çœ‹å·²é€‰ä¸è¯´æ˜ã€‚</div>
      <div class="toolbar">
        <input id="search" type="search" placeholder="ğŸ” æœç´¢æ ‡ç­¾" />
        <button class="ghost" id="clearAll">æ¸…ç©ºå…¨éƒ¨</button>
        <span class="counter" id="countInfo">å·²é€‰ 0 ä¸ª</span>
        <div style="margin-left:auto;display:flex;gap:8px;">
          <button class="ghost" onclick="location.href='step1.html'">â¬… ä¸Šä¸€æ­¥</button>
          <button class="ok" id="saveNext">ä¿å­˜å¹¶è¿›å…¥ç¬¬ä¸‰æ­¥</button>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <main>
      <!-- å·¦ä¾§ï¼šç±»åˆ«ä¸æ ‡ç­¾ -->
      <section class="panel left">
        <h2>ğŸ“š æ ‡ç­¾åº“</h2>

        <!-- èŒä¸šçƒ™å°ï¼šè¡Œä¸š + èŒä½ -->
        <details open>
          <summary>ğŸ¢ èŒä¸šçƒ™å°</summary>
          <div class="tag-grid" id="cat-industry"></div>
          <div class="tag-grid" id="cat-position"></div>
        </details>

        <!-- å…³é”®äº‹ä»¶ -->
        <details open>
          <summary>ğŸ§­ å…³é”®äº‹ä»¶</summary>
          <div class="tag-grid" id="cat-key"></div>
        </details>

        <!-- ç¤¾ä¼šé˜¶å±‚ -->
        <details>
          <summary>ğŸ›ï¸ ç¤¾ä¼šé˜¶å±‚</summary>
          <div class="tag-grid" id="cat-class"></div>
        </details>

        <!-- æ¶ˆè´¹å°è®° -->
        <details>
          <summary>ğŸ›ï¸ æ¶ˆè´¹å°è®°</summary>
          <div class="tag-grid" id="cat-consumption"></div>
        </details>

        <!-- ç¤¾äº¤æŒ‡çº¹ -->
        <details>
          <summary>ğŸ¤ ç¤¾äº¤æŒ‡çº¹</summary>
          <div class="tag-grid" id="cat-social"></div>
        </details>

        <!-- æ—¶é—´åˆ†é… -->
        <details>
          <summary>â° æ—¶é—´åˆ†é…</summary>
          <div class="tag-grid" id="cat-time"></div>
        </details>

        <!-- æ•°å­—è‚¢ä½“è¯­è¨€ -->
        <details>
          <summary>ğŸ“± æ•°å­—è‚¢ä½“è¯­è¨€</summary>
          <div class="tag-grid" id="cat-digital"></div>
        </details>
      </section>

      <!-- å³ä¾§ï¼šå·²é€‰ -->
      <aside class="panel right">
        <h2>âœ… å·²é€‰æ ‡ç­¾</h2>
        <div class="selected" id="selectedBox"></div>
        <footer>
          <span class="muted">ç‚¹å‡»æ ‡ç­¾å¯å‹¾é€‰/å–æ¶ˆã€‚</span>
          <button class="ghost" id="clearSelected">æ¸…ç©º</button>
        </footer>
      </aside>
    </main>
  </div>

  <script>
    /* ============ 1) æ•°æ®ï¼šæ ‡ç­¾åº“ ============ */
    const LIB_KEY_EVENTS = [
      {label:"é‡å¤§å¤±è´¥",desc:"å…³é”®ç›®æ ‡å¤±åˆ©å¯¼è‡´ä»·å€¼è§‚/ç­–ç•¥é‡æ„"},
      {label:"çªé‡è´µäºº",desc:"è·å¾—å…³é”®æ”¯æŒä¸èµ„æºï¼Œæ”¹å˜è½¨è¿¹"},
      {label:"ç§»æ°‘ç»å†",desc:"è·¨æ–‡åŒ–é€‚åº”å¸¦æ¥èº«ä»½ä¸è®¤åŒå˜åŒ–"},
      {label:"è‡ªç„¶ç¾å®³",desc:"ç»å†ç¾å®³åå®‰å…¨/é£é™©è§‚æ”¹å˜"},
      {label:"é‡å¤§ç–¾ç—…",desc:"å¥åº·å±æœºåé‡è¯„äººç”Ÿä¼˜å…ˆçº§"},
      {label:"æ„å¤–è´¢å¯Œ",desc:"èµ„æºéª¤å¢å¸¦æ¥æ¶ˆè´¹/äººé™…ç­–ç•¥å˜åŒ–"},
      {label:"åˆ›ä¸šå¤±è´¥",desc:"å•†ä¸šå°è¯•å—æŒ«ï¼Œé£é™©ä¸å¤ç›˜èƒ½åŠ›æå‡"},
      {label:"é«˜è€ƒ/å‡å­¦å¤±åˆ©",desc:"æ•™è‚²æ‹ç‚¹ï¼ŒåŠ¨æœºä¸è·¯å¾„è°ƒæ•´"},
      {label:"äº²å¯†å…³ç³»åˆ†æ‰‹",desc:"ä¾é™„æ¨¡å¼ä¸ä¿¡ä»»ç­–ç•¥é‡å¡‘"},
      {label:"ç¦»å©š",desc:"è§’è‰²å†åˆ†é…ä¸è¾¹ç•Œæ„Ÿé‡å»º"},
      {label:"ä¸§äº²ä¹‹ç—›",desc:"å“€ä¼¤æ•´åˆï¼Œç”Ÿå‘½æ„ä¹‰å†å®šä¹‰"},
      {label:"ç ´äº§",desc:"è´¢åŠ¡é‡æ„ä¸é£é™©åå¥½é‡ç½®"},
      {label:"è£å‘˜",desc:"èŒä¸šéŸ§æ€§ä¸å†å°±ä¸šç­–ç•¥å¼ºåŒ–"},
      {label:"é‡å¤§æ³•å¾‹çº çº·",desc:"è§„åˆ™æ„è¯†ã€é£é™©è§„é¿æ˜¾è‘—æå‡"},
      {label:"å…¬ä¼—æ›å…‰",desc:"åèª‰/éšç§å†²å‡»åè‡ªæˆ‘å‘ˆç°æ”¹å˜"},
      {label:"æ”¿ç­–çº¢åˆ©",desc:"å¤–éƒ¨åˆ¶åº¦åˆ©å¥½å¸¦æ¥æœºä¼šçª—å£"},
      {label:"å±æœºé¢†å¯¼",desc:"é«˜å‹ä¸­æ‰¿æ‹…é¢†å¯¼ï¼Œå½¢æˆæŒ‡æŒ¥é£æ ¼"},
      {label:"ä¸­å¹´è½¬è¡Œ",desc:"æ ¸å¿ƒèƒ½åŠ›è¿ç§»ä¸èº«ä»½å†é€ "},
      {label:"åˆ›ä¼¤åæˆé•¿",desc:"é€†å¢ƒåå¿ƒç†éŸ§æ€§ä¸æ„ä¹‰æ„Ÿæå‡"},
      {label:"é•¿é€”ç‹¬æ—…",desc:"ç‹¬ç«‹æ€§ä¸æ¢ç´¢æ€§æ˜¾è‘—å¢åŠ "},
      {label:"çµæ€§è§‰é†’",desc:"ä»·å€¼è§‚ç”±å¤–åœ¨æˆåŠŸè½¬å‘å†…åœ¨ä¸€è‡´"},
      {label:"ç§‘ç ”çªç ´",desc:"æ·±åº¦ä¸“æ³¨è·å¾—é•¿æœŸå›æŠ¥çš„è®°å¿†"},
      {label:"ç«æŠ€å¤ºå† ",desc:"èƒœä»»æ„Ÿä¸ç›®æ ‡ç®¡ç†ç­–ç•¥å›ºåŒ–"},
      {label:"é­é‡æ¬ºå‡Œ",desc:"è¾¹ç•Œä¸é˜²å¾¡ç­–ç•¥å¢å¼º"},
      {label:"é•¿æœŸç…§æŠ¤äº²äºº",desc:"å…±æƒ…ä¸è€æ€§æå‡ï¼Œæ—¶é—´è§‚æ”¹å˜"},
      {label:"é‡å¤§åˆä¼™åˆ†æ‰‹",desc:"ä¿¡ä»»æ¨¡å‹ä¸åˆåŒæ„è¯†å¢å¼º"},
      {label:"èƒŒå›/è¢«æ¬ºéª—",desc:"é£é™©è¯„ä¼°ä¸ä¿¡æ¯æ ¸éªŒå€¾å‘å¢å¼º"},
      {label:"åŸå¸‚è¿ç§»",desc:"ç¤¾äº¤ç½‘ç»œä¸èµ„æºå†æ„å»º"},
      {label:"å€ºåŠ¡å‹åŠ›",desc:"ç°é‡‘æµä¸æˆæœ¬æ§åˆ¶èƒ½åŠ›è¢«åŠ¨æå‡"},
      {label:"å®ç°è´¢åŠ¡è‡ªç”±",desc:"æ—¶é—´é…ç½®ä¸è‡ªæˆ‘å®ç°ç©ºé—´æ‰©å¤§"}
    ];

    const INDUSTRIES = [
      {label:"äº’è”ç½‘/è½¯ä»¶",desc:"æ•°å­—åŒ–ã€æ•æ·ã€å¿«é€Ÿè¯•é”™"},
      {label:"äººå·¥æ™ºèƒ½",desc:"ç®—æ³•æ€ç»´ã€æ•°æ®é©±åŠ¨ä¸å‰æ²¿è¿­ä»£"},
      {label:"é‡‘è/æŠ•èµ„",desc:"é£é™©æ”¶ç›Šæƒè¡¡ã€å†³ç­–ä¸åˆè§„"},
      {label:"åˆ¶é€ /å·¥ä¸š",desc:"æµç¨‹æ ‡å‡†åŒ–ä¸å“è´¨æ§åˆ¶"},
      {label:"æ±½è½¦/æ™ºèƒ½è½¦",desc:"ç³»ç»Ÿå·¥ç¨‹ä¸å®‰å…¨å†—ä½™"},
      {label:"åŠå¯¼ä½“/ç¡¬ä»¶",desc:"é«˜é—¨æ§›ã€é•¿ç ”å‘å‘¨æœŸä¸ä¸¥è°¨æ€§"},
      {label:"åŒ»ç–—/åŒ»è¯",desc:"å¾ªè¯ä¸ä¼¦ç†ä¼˜å…ˆã€ä¸¥è°¨åˆè§„"},
      {label:"æ•™è‚²/åŸ¹è®­",desc:"çŸ¥è¯†ä¼ é€’ã€è€å¿ƒä¸ä¸ªä½“å·®å¼‚"},
      {label:"åª’ä½“/å†…å®¹",desc:"å™äº‹ã€è¡¨è¾¾ä¸å½±å“åŠ›å¯¼å‘"},
      {label:"ç”µå•†/é›¶å”®",desc:"è½¬åŒ–æ•ˆç‡ã€ä¾›åº”é“¾ä¸ç”¨æˆ·æ´å¯Ÿ"},
      {label:"ç‰©æµ/ä¾›åº”é“¾",desc:"æ—¶æ•ˆã€æˆæœ¬ä¸ååŒä¼˜åŒ–"},
      {label:"èƒ½æº/æ–°èƒ½æº",desc:"é•¿æœŸèµ„æœ¬æŠ•å…¥ä¸ç¨³å®šå›æŠ¥"},
      {label:"æˆ¿åœ°äº§/å»ºç­‘",desc:"é¡¹ç›®åˆ¶ã€é‡èµ„äº§ä¸å‘¨æœŸæ€§"},
      {label:"æ”¿åºœ/äº‹ä¸šå•ä½",desc:"å…¬å…±ä»·å€¼ã€æµç¨‹åˆè§„ä¸ç¨³å®šæ€§"},
      {label:"å†›è­¦/å®‰é˜²",desc:"çºªå¾‹ã€åº”æ€¥ä¸é£é™©æ§åˆ¶"},
      {label:"å’¨è¯¢/æ³•å¾‹/ä¼šè®¡",desc:"ç»“æ„åŒ–é—®é¢˜è§£å†³ä¸ä¸“ä¸šåˆ¤æ–­"},
      {label:"äººåŠ›/ç»„ç»‡",desc:"äººæ‰æ æ†ä¸ç»„ç»‡ååŒ"},
      {label:"æ¸¸æˆ/å¨±ä¹",desc:"ä½“éªŒç»æµã€æƒ…ç»ªè®¾è®¡ä¸ç•™å­˜"},
      {label:"æ—…æ¸¸/é…’åº—/é¤é¥®",desc:"æœåŠ¡ä½“éªŒä¸è¿è¥æ•ˆç‡"},
      {label:"å†œä¸š/ç”Ÿç‰©ç§‘æŠ€",desc:"å®éªŒã€å­£èŠ‚æ€§ä¸å¯æŒç»­"}
    ];

    const POSITIONS = [
      {label:"äº§å“ç»ç†",desc:"ä»¥ç”¨æˆ·ä¸æ•°æ®é©±åŠ¨çš„è·¨éƒ¨é—¨åè°ƒ"},
      {label:"åç«¯å·¥ç¨‹å¸ˆ",desc:"ç³»ç»Ÿè®¾è®¡ã€æ€§èƒ½å¯é ä¸å®¹é”™"},
      {label:"å‰ç«¯å·¥ç¨‹å¸ˆ",desc:"äº¤äº’ä½“éªŒä¸å¯ç”¨æ€§"},
      {label:"ç®—æ³•å·¥ç¨‹å¸ˆ",desc:"å»ºæ¨¡ã€è¯„ä¼°ä¸è¿­ä»£ä¼˜åŒ–"},
      {label:"æ•°æ®åˆ†æ/ç§‘å­¦",desc:"æŒ‡æ ‡ä½“ç³»ä¸å†³ç­–æ”¯æŒ"},
      {label:"æµ‹è¯•/QA",desc:"è´¨é‡ä¿éšœä¸é£é™©é¢„é˜²"},
      {label:"è¿ç»´/å¹³å°",desc:"ç¨³å®šæ€§ä¸è‡ªåŠ¨åŒ–"},
      {label:"è®¾è®¡å¸ˆï¼ˆUI/UXï¼‰",desc:"åŒç†å¿ƒã€ä¿¡æ¯æ¶æ„ä¸ç¾å­¦"},
      {label:"é¡¹ç›®ç»ç†",desc:"è¿›åº¦ã€èŒƒå›´ä¸èµ„æºä¸‰è§’"},
      {label:"é”€å”®",desc:"ç›®æ ‡å¯¼å‘ä¸äººé™…å½±å“"},
      {label:"å®¢æœ/è¿è¥",desc:"æµç¨‹ä¸ä½“éªŒä¼˜åŒ–"},
      {label:"å¸‚åœº/å“ç‰Œ",desc:"å™äº‹ã€å®šä½ä¸ä¼ æ’­"},
      {label:"å…¬å…³",desc:"èˆ†æƒ…ä¸å…³ç³»ç®¡ç†"},
      {label:"æ³•åŠ¡",desc:"åˆè§„ã€åˆåŒä¸é£æ§"},
      {label:"äººåŠ›HR",desc:"æ‹›è˜ã€ç»©æ•ˆä¸å‘å±•"},
      {label:"è´¢åŠ¡/å®¡è®¡",desc:"åˆè§„ã€é¢„ç®—ä¸å†…æ§"},
      {label:"æˆ˜ç•¥/å’¨è¯¢",desc:"ç»“æ„åŒ–åˆ†æä¸è·¯çº¿è®¾è®¡"},
      {label:"æ•™å¸ˆ/è®²å¸ˆ",desc:"çŸ¥è¯†ç»„ç»‡ä¸å¼•å¯¼"},
      {label:"åŒ»ç”Ÿ/æŠ¤å£«",desc:"ä¸´åºŠåˆ¤æ–­ä¸ä¼¦ç†"},
      {label:"ç§‘ç ”äººå‘˜",desc:"å‡è®¾éªŒè¯ä¸é•¿æœŸä¸»ä¹‰"},
      {label:"ä¼ä¸šå®¶/åˆ›å§‹äºº",desc:"èµ„æºæ•´åˆä¸ä¸ç¡®å®šæ€§æ‰¿æ‹…"},
      {label:"è‡ªç”±èŒä¸šè€…",desc:"è‡ªé©±ä¸å¤šçº¿ç¨‹ç»è¥"},
      {label:"äº§å“è¿è¥",desc:"å¢é•¿ã€ç•™å­˜ä¸åˆ†å±‚ç­–ç•¥"},
      {label:"å†…å®¹åˆ›ä½œè€…",desc:"è¡¨è¾¾ã€èŠ‚å¥ä¸ç¤¾ç¾¤ç»è¥"},
      {label:"æ¸¸æˆç­–åˆ’",desc:"æ•°å€¼/å…³å¡ä¸ä¹è¶£è®¾è®¡"}
    ];

    const LIB_CLASS = [
      {label:"å¯’é—¨å‡ºèº«",desc:"èµ„æºç¨€ç¼ºï¼ŒéŸ§æ€§ä¸ä¸Šå‡åŠ¨æœºå¼º"},
      {label:"å·¥è–ªå®¶åº­",desc:"ç¨³å¥åŠ¡å®ï¼Œé£é™©åå¥½ä¸­ä½"},
      {label:"åŸé•‡å®¶åº­",desc:"æœ¬åœ°ç½‘ç»œç¨³å›ºï¼Œæœºä¼šå‡è¡¡"},
      {label:"å¿åŸåœŸè‘—",desc:"ç†Ÿäººç¤¾ä¼šï¼Œå…³ç³»å¯¼å‘æ˜æ˜¾"},
      {label:"ä¸­äº§å®¶åº­",desc:"æ•™è‚²æŠ•å…¥é«˜ï¼Œè§„åˆ’æ„è¯†å¼º"},
      {label:"æ–°ä¸­äº§",desc:"è·¨åŸæµåŠ¨ä¸æˆé•¿å‹å¿ƒæ€"},
      {label:"å‡†å¯Œè£•",desc:"èµ„äº§å¢é•¿æœŸï¼Œèµ„æºæ•´åˆèƒ½åŠ›æå‡"},
      {label:"å¯Œè£•é˜¶å±‚",desc:"èµ„æºå®½è£•ä¸å®ˆæˆæ€ç»´"},
      {label:"è¶…é«˜å‡€å€¼",desc:"å®¶æ—æ²»ç†ä¸é£é™©éš”ç¦»"},
      {label:"å®¶æ—ä¼ä¸šèƒŒæ™¯",desc:"ç»§æ‰¿ä¸æ²»ç†è®­ç»ƒ"},
      {label:"ä½“åˆ¶å†…èƒŒæ™¯",desc:"è§„åˆ™æ„è¯†ã€ç¨³å®šé¢„æœŸ"},
      {label:"ç§»æ°‘å®¶åº­",desc:"è·¨æ–‡åŒ–èµ„æºä¸é€‚åº”åŠ›"},
      {label:"ç•™å­¦å®¶åº­",desc:"å…¨çƒè§†é‡ä¸æœºä¼šåå¥½"},
      {label:"å•äº²å®¶åº­",desc:"è´£ä»»æ—©ç†Ÿä¸è¾¹ç•Œæ•æ„Ÿ"},
      {label:"ä¸å…‹/ä¸å©š",desc:"è‡ªæˆ‘å®ç°ä¼˜å…ˆ"},
      {label:"å››ä¸–åŒå ‚",desc:"ä¼ ç»Ÿè´£ä»»ä¸ç§©åºå¯¼å‘"},
      {label:"åŸä¹¡æµåŠ¨",desc:"é€‚åº”æ€§å¼ºï¼Œç¤¾äº¤é‡å»ºé¢‘ç¹"},
      {label:"å¤–æ¥åŠ¡å·¥",desc:"åŠ¡å®ä¸æŠ—å‹"},
      {label:"èµ„æºç¨€ç¼ºåœ°åŒº",desc:"èŠ‚åˆ¶ä¸éŸ§æ€§"},
      {label:"æ•™è‚²èµ„æºå……æ²›",desc:"ç«äº‰æ„è¯†ä¸ç²¾ç»†åŒ–åŸ¹å…»"}
    ];

    const LIB_CONSUMPTION = [
      {label:"å¥¢ä¾ˆå“",desc:"é‡è§†èº«ä»½å‘ˆç°ä¸å“è´¨"},
      {label:"çŸ¥è¯†ä»˜è´¹",desc:"ä»¥å­¦ä¹ ä¸ºä¸»è¦æŠ•å…¥"},
      {label:"æç®€ä¸»ä¹‰",desc:"å»å†—ä½™ã€é‡ä½“éªŒ"},
      {label:"å†²åŠ¨æ¶ˆè´¹",desc:"æƒ…ç»ªé©±åŠ¨ä¸‹å•"},
      {label:"å›¤è´§ç™–",desc:"ä»¥ç‰©æ¢å®‰å…¨æ„Ÿ"},
      {label:"ç½‘è´­ä¾èµ–",desc:"ä¾¿åˆ©è‡³ä¸Šï¼Œæ˜“è¶…æ”¯"},
      {label:"ç²¾è‡´ç”Ÿæ´»",desc:"ä»ªå¼æ„Ÿä¸è´¨é‡æ§åˆ¶"},
      {label:"å¤–å–ä¾èµ–",desc:"æ—¶é—´æˆæœ¬æƒè¡¡"},
      {label:"æ‰“æŠ˜çŒæ‰‹",desc:"æ€§ä»·æ¯”ä¸å»¶è¿Ÿæ¶ˆè´¹"},
      {label:"è¡€æ‹¼è¾¾äºº",desc:"è´­ç‰©å¿«æ„Ÿæ˜¾è‘—"},
      {label:"ä¿¡ç”¨æ¶ˆè´¹",desc:"é¢„æ”¯æœªæ¥ï¼Œç°é‡‘æµç´§å¼ "},
      {label:"ç¦æ¬²æ¶ˆè´¹",desc:"å¼ºæŠ‘åˆ¶ï¼Œä½æ¬²æœ›"},
      {label:"åƒè´§",desc:"æƒ…ç»ªä¸ç¾é£Ÿç»‘å®š"},
      {label:"æ¸¸æˆæ°ªé‡‘",desc:"è™šæ‹Ÿæ¶ˆè´¹é«˜"},
      {label:"æƒ…æ„Ÿæ¶ˆè´¹",desc:"èµ ä¸/ç¤¾äº¤ä½“é¢"},
      {label:"æ½®æµè¿½éš",desc:"è¶‹åŠ¿é©±åŠ¨é€‰æ‹©"},
      {label:"æŠ•èµ„ç†è´¢",desc:"ç†æ€§é…ç½®ä¸å¢å€¼"},
      {label:"æ—…æ¸¸æ¶ˆè´¹",desc:"ä½“éªŒä¼˜å…ˆ"},
      {label:"å¨±ä¹æ¶ˆè´¹",desc:"æ–‡åŒ–æ´»åŠ¨å¼€é”€å¤§"},
      {label:"å¥èº«æ¶ˆè´¹",desc:"å¥åº·æŠ•å…¥"},
      {label:"ç²¾ç¥æ¶ˆè´¹",desc:"èº«å¿ƒæˆé•¿ç±»å¼€æ”¯"},
      {label:"æ•°ç æ§",desc:"æ›´æ–°é¢‘ç¹ã€å‘çƒ§å‹"},
      {label:"å® ç‰©æ¶ˆè´¹",desc:"æ‹ŸäººåŒ–æƒ…æ„Ÿæ”¯å‡º"},
      {label:"æ±½è½¦æ§",desc:"é€Ÿåº¦/èº«ä»½è±¡å¾"},
      {label:"ç¾å¦†æ¶ˆè´¹",desc:"å½¢è±¡ä¸ç¤¾äº¤èµ„æœ¬"},
      {label:"å®¶å±…å¸ƒç½®",desc:"ç¯å¢ƒç¾å­¦ä¸èˆ’é€‚"},
      {label:"å¨æˆ¿è¾¾äºº",desc:"å¨å…·/é£ŸææŠ•å…¥"},
      {label:"æ‘„å½±æ¶ˆè´¹",desc:"å™¨æä¸åˆ›ä½œå¹¶é‡"},
      {label:"æ•™è‚²æ¶ˆè´¹",desc:"è‡ªæˆ‘/å­å¥³æ•™è‚²æŠ•å…¥"},
      {label:"æ”¶è—ç™–",desc:"ç¨€ç¼ºæ€§ä¸åå¥½é©±åŠ¨"}
    ];

    const LIB_SOCIAL = [
      {label:"ç¾¤èŠä¸»å¯¼è€…",desc:"è¯é¢˜é©±åŠ¨ä¸ç»„ç»‡åŠ›"},
      {label:"å€¾å¬è€…",desc:"ä½è°ƒå…±æƒ…ä¸æ”¯æŒ"},
      {label:"æ®µå­æ‰‹",desc:"å¹½é»˜åŒ–è§£ç´§å¼ "},
      {label:"ç¤¾äº¤å›é¿",desc:"é€€ç¼©ä¸èƒ½é‡ä¿æŠ¤"},
      {label:"è‡ªæ‹è¾¾äºº",desc:"è‡ªæˆ‘å‘ˆç°éœ€æ±‚é«˜"},
      {label:"èšä¼šå¸¸å®¢",desc:"çº¿ä¸‹å‚ä¸åº¦é«˜"},
      {label:"èˆæ± ç„¦ç‚¹",desc:"è¡¨ç°æ¬²ä¸è‚¢ä½“è¡¨è¾¾"},
      {label:"ç¤¾äº¤è¾¾äºº",desc:"å¤šå¹³å°é«˜é¢‘äº’åŠ¨"},
      {label:"æ²‰é»˜ç¤¾äº¤",desc:"åœ¨åœºä½†å°‘è¨€"},
      {label:"åœˆå­ç»´æŠ¤è€…",desc:"é•¿æœŸå…³ç³»ç»è¥"},
      {label:"æœ‹å‹åœˆå®½å¹¿",desc:"å¼±è¿æ¥æ•°é‡å¤§"},
      {label:"å‘è¨€ç§¯æè€…",desc:"è§‚ç‚¹è¡¨è¾¾å¤–æ˜¾"},
      {label:"ç¤¾äº¤ç–²åŠ³è€…",desc:"ç¤¾äº¤åæ¶ˆè€—å¤§"},
      {label:"èˆå°æ§",desc:"èˆå°è¡¨ç°æ¬²å¼º"},
      {label:"ç»„ç»‡è€…",desc:"ä¸»åŠ¨å‘èµ·ä¸åè°ƒ"},
      {label:"åè°ƒè€…",desc:"ç¼“å’Œå†²çªä¸å±…ä¸­"},
      {label:"å¤œçŒ«å­ç¤¾äº¤",desc:"å¤œé—´é«˜æ´»è·ƒ"},
      {label:"éš”ç»è€…",desc:"ç¤¾äº¤å»è¿æ¥åŒ–"},
      {label:"å›½é™…ç¤¾äº¤",desc:"è·¨æ–‡åŒ–äº’åŠ¨"},
      {label:"çŸ¥è¯†å‹ç¤¾äº¤",desc:"ä»¥å†…å®¹ä¸ºçº½å¸¦"},
      {label:"å¨±ä¹å‹ç¤¾äº¤",desc:"ä»¥ç©ä¹ä¸ºçº½å¸¦"},
      {label:"å®¶åº­å¯¼å‘ç¤¾äº¤",desc:"äº²ç¼˜ç½‘ç»œä¸ºä¸»"},
      {label:"å°åœˆå­æ§",desc:"å¼ºå…³ç³»å°ç¾¤"},
      {label:"è™šæ‹Ÿç¤¾äº¤",desc:"æ¸¸æˆ/VRä¸ºä¸»"},
      {label:"ç½‘ç»œæš§æ˜§",desc:"çº¿ä¸Šæƒ…æ„Ÿäº’åŠ¨"},
      {label:"éŸ³ä¹ç¤¾äº¤",desc:"åŒå¥½èšåˆ"},
      {label:"æ–‡å­¦ç¤¾äº¤",desc:"é˜…è¯»å†™ä½œåŒå¥½"},
      {label:"æ¸¸æˆç¤¾äº¤",desc:"å…¬ä¼š/æˆ˜é˜Ÿ"},
      {label:"å®—æ•™ç¤¾äº¤",desc:"ä¿¡ä»°å…±åŒä½“"},
      {label:"å…¬ç›Šç¤¾äº¤",desc:"åŠ©äºº/å¿—æ„¿ç½‘ç»œ"},
      {label:"èŒåœºäººè„‰",desc:"è¡Œä¸šäº¤æ¢ä¸åä½œ"},
      {label:"å­¦æœ¯ç¤¾äº¤",desc:"è®ºæ–‡/ä¼šè®®ä¸ºçº½å¸¦"},
      {label:"é‚»é‡Œç¤¾äº¤",desc:"ç¤¾åŒºä¸åœ°ç¼˜"},
      {label:"è¿åŠ¨ç¤¾äº¤",desc:"ä¿±ä¹éƒ¨/å›¢ç»ƒ"},
      {label:"é…’å±€ç¤¾äº¤",desc:"é¤å™ä¸å…³ç³»æ¶¦æ»‘"}
    ];

    const LIB_TIME = [
      {label:"å¤œé—´æ´»è·ƒ",desc:"å¤œæ™šæ•ˆç‡é«˜"},
      {label:"æ™¨å‹äºº",desc:"æ¸…æ™¨ä¸“æ³¨"},
      {label:"ç¢ç‰‡åŒ–",desc:"å¤šä»»åŠ¡åˆ‡æ¢"},
      {label:"é•¿æœŸè§„åˆ’è€…",desc:"å‰ç½®è®¡åˆ’ä¸å¤ç›˜"},
      {label:"ä¸´æ—¶æŠ±ä½›è„š",desc:"å‹åŠ›é©±åŠ¨æ•ˆç‡"},
      {label:"å¾ªç¯ä½œæ¯",desc:"å›ºå®šèŠ‚å¾‹"},
      {label:"æ¸¸æˆæ—¶é—´å¤š",desc:"å¨±ä¹æƒé‡é«˜"},
      {label:"å¥èº«è§„å¾‹",desc:"å›ºå®šé”»ç‚¼"},
      {label:"å­¦ä¹ ä¸“æ³¨",desc:"é•¿æœŸå­¦ä¹ æŠ•å…¥"},
      {label:"èšä¼šé¢‘ç¹",desc:"ç¤¾äº¤å æ¯”é«˜"},
      {label:"é•¿ç¡çœ ",desc:"æ¢å¤æ€§ä¼˜å…ˆ"},
      {label:"çŸ­ç¡çœ ",desc:"æ—¶é—´æŒ¤å‹"},
      {label:"å®¶åº­æ—¶é—´å¤š",desc:"äº²å­/é•¿è¾ˆé™ªä¼´"},
      {label:"å‡ºå·®é¢‘ç¹",desc:"å·®æ—…å æ¯”é«˜"},
      {label:"å¨±ä¹æ—¶é—´å¤š",desc:"çœ‹å‰§/ç»¼è‰º"},
      {label:"å­¦ä¹ å‹ä½œæ¯",desc:"è¯¾ç¨‹/è¯ä¹¦é©±åŠ¨"},
      {label:"å†¥æƒ³æ—¶é—´",desc:"èº«å¿ƒè°ƒèŠ‚"},
      {label:"æ•£æ­¥æ—¶é—´",desc:"è½»è¿åŠ¨+æ€è€ƒ"},
      {label:"åˆ›ä½œæ—¶é—´",desc:"å†™ä½œ/ç»˜ç”»/éŸ³ä¹"},
      {label:"å·¥ä½œç‹‚",desc:"é«˜æŠ•å…¥å·¥ä½œ"},
      {label:"å‰¯ä¸šæ—¶é—´",desc:"å¤šå…ƒæ”¶å…¥å°è¯•"},
      {label:"ç…§æŠ¤å®¶äºº",desc:"æŠ¤ç†ä¸å®¶åŠ¡"},
      {label:"ç¤¾ç¾¤ç»è¥",desc:"çº¿ä¸Šç¤¾ç¾¤ç»´æŠ¤"},
      {label:"é€šå‹¤æ—¶é—´é•¿",desc:"è¿œè·ç¦»é€šå‹¤"},
      {label:"æˆ·å¤–æ—¶é—´å¤š",desc:"å¾’æ­¥/éœ²è¥/é˜³å…‰"}
    ];

    const LIB_DIGITAL = [
      {label:"ç‚¹èµç‹‚é­”",desc:"é«˜é¢‘ç‚¹æ”’è¡¨è¾¾å­˜åœ¨"},
      {label:"å·²è¯»ä¸å›",desc:"ä¿æŒç–ç¦»/å»¶è¿Ÿå›åº”"},
      {label:"é•¿æ–‡å…š",desc:"ç³»ç»Ÿè¡¨è¾¾åå¥½"},
      {label:"æœ‹å‹åœˆåˆ·å±",desc:"é«˜é¢‘å‘å¸ƒåŠ¨æ€"},
      {label:"è¡¨æƒ…åŒ…è¾¾äºº",desc:"è½»æ¾å¹½é»˜è¡¨è¾¾"},
      {label:"æ½œæ°´å…š",desc:"ä½å¯è§åº¦è§‚å¯Ÿ"},
      {label:"ç¢ç‰‡è®°å½•",desc:"å¤‡å¿˜/éšæ‰‹è®°"},
      {label:"è½¬å‘å…š",desc:"å†…å®¹äºŒæ¬¡ä¼ æ’­"},
      {label:"è§†é¢‘åˆ›ä½œè€…",desc:"çŸ­è§†é¢‘/ç›´æ’­è¾“å‡º"},
      {label:"æ¸¸æˆåœ¨çº¿",desc:"å®æ—¶è¯­éŸ³/ç»„é˜Ÿ"},
      {label:"çƒ­ç‚¹è¿½éš",desc:"æ—¶äº‹å‚ä¸è¡¨è¾¾"},
      {label:"æƒ…ç»ªå‘æ³„",desc:"å®£æ³„å‹è¡¨è¾¾"},
      {label:"é¢‘ç¹åˆ†äº«",desc:"åˆ†äº«ç»™ç†Ÿäººåœˆ"},
      {label:"ä¿¡æ¯æœé›†",desc:"å†…å®¹çˆ¬æ¢³ä¸å½’æ¡£"},
      {label:"æœºå™¨äººæ§",desc:"AI/è‡ªåŠ¨åŒ–å·¥ä½œæµ"},
      {label:"è™šæ‹Ÿæ²‰æµ¸",desc:"å…ƒå®‡å®™/VRç¤¾äº¤"},
      {label:"æ•°æ®æ§",desc:"è¿½è¸ªä¸é‡åŒ–è‡ªæˆ‘"},
      {label:"åˆ·å±æˆç˜¾",desc:"é«˜æ—¶é•¿ä½¿ç”¨"},
      {label:"åšå®¢ä½œè€…",desc:"é•¿å‘¨æœŸæ·±åº¦è¾“å‡º"},
      {label:"æŠ€æœ¯æå®¢",desc:"å°é²œä¸æ”¹é€ "},
      {label:"è¯­éŸ³ç¤¾äº¤",desc:"è¯­èŠ/æ’­å®¢äº’åŠ¨"},
      {label:"ç›´æ’­è§‚ä¼—",desc:"ç»æµæ‰“èµ/äº’åŠ¨"},
      {label:"ç›´æ’­ä¸»",desc:"ä¸»æŒ/å˜ç°èƒ½åŠ›"},
      {label:"ç”µè¯å…š",desc:"åå¥½åŒæ­¥æ²Ÿé€š"},
      {label:"é‚®ä»¶æ§",desc:"æ­£å¼ä¹¦é¢æ²Ÿé€š"},
      {label:"å¤šç¾¤ä½“æ´»è·ƒ",desc:"å¹¶è¡Œç¤¾ç¾¤å‚ä¸"},
      {label:"ç½‘ç»œåˆä½œ",desc:"è¿œç¨‹åä½œ"},
      {label:"Kæ­Œè¾¾äºº",desc:"éŸ³ä¹è¡¨è¾¾"},
      {label:"è®ºå›æ·±æ½œ",desc:"é•¿å¸–/ä¸“ä¸šè®ºå›"},
      {label:"Gitæ´»è·ƒ",desc:"å¼€æºåä½œä¸è´¡çŒ®"},
      {label:"ç¬”è®°èŠ±å›­",desc:"ä¸ªäººçŸ¥è¯†åº“å…¬å¼€"},
      {label:"åŒ¿åå°å·",desc:"èº«ä»½åˆ‡æ¢ç®¡ç†"},
      {label:"AIæç¤ºå·¥ç¨‹",desc:"æç¤ºæ„å»º/è‡ªåŠ¨åŒ–"},
      {label:"æ’­å®¢å¬ä¼—",desc:"é•¿éŸ³é¢‘æ‘„å…¥"},
      {label:"çŸ­è§†é¢‘é‡åº¦",desc:"æ³¨æ„åŠ›ç¢ç‰‡åŒ–"}
    ];

    // ç»Ÿä¸€æ ‡ç­¾åº“
    const LIBRARIES = {
      key: { label: "å…³é”®äº‹ä»¶", items: LIB_KEY_EVENTS },
      class: { label: "ç¤¾ä¼šé˜¶å±‚", items: LIB_CLASS },
      consumption: { label: "æ¶ˆè´¹å°è®°", items: LIB_CONSUMPTION },
      social: { label: "ç¤¾äº¤æŒ‡çº¹", items: LIB_SOCIAL },
      time: { label: "æ—¶é—´åˆ†é…", items: LIB_TIME },
      digital: { label: "æ•°å­—è‚¢ä½“è¯­è¨€", items: LIB_DIGITAL },
      industry: { label: "è¡Œä¸š", items: INDUSTRIES },
      position: { label: "èŒä½", items: POSITIONS }
    };

    // ä» localStorage åŠ è½½å·²é€‰æ ‡ç­¾
    let selectedTags = [];
    try {
      const raw = localStorage.getItem("selectedTags");
      selectedTags = raw ? JSON.parse(raw) : [];
    } catch (e) {
      console.error("åŠ è½½å¤±è´¥:", e);
    }

    // æ£€æŸ¥æ˜¯å¦å·²é€‰
    function isSelected(categoryLabel, label) {
      return selectedTags.some(t => t.category === categoryLabel && t.label === label);
    }

    // åˆ‡æ¢æ ‡ç­¾
    function toggleTag(categoryLabel, label) {
      // æŸ¥æ‰¾ desc
      let desc = "";
      for (const [, cat] of Object.entries(LIBRARIES)) {
        if (cat.label === categoryLabel) {
          const item = cat.items.find(i => i.label === label);
          if (item) {
            desc = item.desc;
            break;
          }
        }
      }

      const index = selectedTags.findIndex(t => t.category === categoryLabel && t.label === label);
      if (index > -1) {
        selectedTags.splice(index, 1);
      } else {
        selectedTags.push({
          label,
          desc,
          category: categoryLabel,
          weight: 5
        });
      }
      saveToStorage();
      renderSelected();
      renderAllChips();
    }

    // ä¿å­˜
    function saveToStorage() {
      try {
        localStorage.setItem("selectedTags", JSON.stringify(selectedTags));
        document.getElementById("countInfo").textContent = `å·²é€‰ ${selectedTags.length} ä¸ª`;
      } catch (e) {
        console.error("ä¿å­˜å¤±è´¥:", e);
      }
    }

    // æ¸²æŸ“æ‰€æœ‰æ ‡ç­¾
    function renderAllChips() {
      Object.entries(LIBRARIES).forEach(([key, categoryData]) => {
        const container = document.getElementById(`cat-${key}`);
        if (!container) return;
        container.innerHTML = categoryData.items.map(item => {
          const active = isSelected(categoryData.label, item.label) ? 'active' : '';
          return `
            <button class="chip ${active}" onclick="toggleTag('${categoryData.label}', '${item.label}')">
              ${item.label} <small>Â· ${categoryData.label}</small>
            </button>
          `;
        }).join("");
      });
    }

    // æ¸²æŸ“å·²é€‰
    function renderSelected() {
      const box = document.getElementById("selectedBox");
      if (selectedTags.length === 0) {
        box.innerHTML = `<div class="muted">å°šæœªé€‰æ‹©æ ‡ç­¾</div>`;
        return;
      }
      box.innerHTML = selectedTags.map((tag, i) => `
        <div class="sel-item">
          <div class="meta">
            <div class="ttl">${tag.label} <span class="pill">${tag.category}</span></div>
            <div class="desc">${tag.desc}</div>
            <div class="row" style="margin-top:6px;">
              <label class="muted">å½±å“å¼ºåº¦</label>
              <input type="range" min="1" max="10" value="${tag.weight}" oninput="updateWeight(${i}, this.value)" />
            </div>
          </div>
          <button class="rm" onclick="removeSelected(${i})">ç§»é™¤</button>
        </div>
      `).join("");
    }

    // æ›´æ–°æƒé‡
    function updateWeight(index, value) {
      selectedTags[index].weight = Number(value);
      saveToStorage();
    }

    // ç§»é™¤
    function removeSelected(index) {
      selectedTags.splice(index, 1);
      saveToStorage();
      renderSelected();
      renderAllChips();
    }

    // æœç´¢
    document.getElementById("search").addEventListener("input", (e) => {
      const query = e.target.value.trim().toLowerCase();
      if (!query) {
        renderAllChips();
        return;
      }
      Object.entries(LIBRARIES).forEach(([key, categoryData]) => {
        const container = document.getElementById(`cat-${key}`);
        if (!container) return;
        container.innerHTML = categoryData.items
          .filter(item => item.label.toLowerCase().includes(query) || item.desc.toLowerCase().includes(query))
          .map(item => {
            const active = isSelected(categoryData.label, item.label) ? 'active' : '';
            return `
              <button class="chip ${active}" onclick="toggleTag('${categoryData.label}', '${item.label}')">
                ${item.label} <small>Â· ${categoryData.label}</small>
              </button>
            `;
          }).join("");
      });
    });

    // æ¸…ç©º
    document.getElementById("clearSelected").onclick = () => {
      if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å·²é€‰æ ‡ç­¾å—ï¼Ÿ")) {
        selectedTags = [];
        saveToStorage();
        renderSelected();
        renderAllChips();
      }
    };

    document.getElementById("clearAll").onclick = () => {
      document.getElementById("search").value = "";
      renderAllChips();
    };

    // ä¿å­˜å¹¶è·³è½¬
    document.getElementById("saveNext").onclick = () => {
      saveToStorage();
      alert("âœ… æ ‡ç­¾å·²ä¿å­˜ï¼");
      window.location.assign("report.html");
    };

    // åˆå§‹åŒ–
    document.addEventListener("DOMContentLoaded", () => {
      renderAllChips();
      renderSelected();
    });
  </script>
</body>
</html>